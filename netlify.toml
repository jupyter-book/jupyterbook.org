[build]
  command = "cd docs && npm install && npx myst build --html --execute"
  publish = "docs/_build/html"

# ----------------------------------------------------------------------------
# BLOG
# ----------------------------------------------------------------------------
[[redirects]]
  from = "/blog"
  to = "https://jupyter-book-blog.netlify.app/blog/"
  status = 200
  force = true

[[redirects]]
  from = "/blog/*"
  to = "https://jupyter-book-blog.netlify.app/blog/:splat"
  status = 200
  force = true

# ----------------------------------------------------------------------------
# TEAM COMPASS
# ----------------------------------------------------------------------------
[[redirects]]
  from = "/compass"
  to = "https://compass.jupyterbook.org/"
  status = 200
  force = true

[[redirects]]
  from = "/compass/*"
  to = "https://compass.jupyterbook.org/:splat"
  status = 200
  force = true

# ----------------------------------------------------------------------------
# USER DOCUMENTATION (READ THE DOCS)
# ----------------------------------------------------------------------------

# Force any /stable/ links back to /docs/ folder.
[[redirects]]
  from = "/stable/*"
  to = "/docs-move-content-to-org/:splat"
  status = 301
  force = true

# Map /docs/ to the RTD stable build.
[[redirects]]
  from = "/docs/*"
  to = "https://jupyterbook.org/docs-move-content-to-org/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/docs-move-content-to-org/*"
  to = "https://jupyterbook.org/docs-move-content-to-org/:splat"
  status = 200
  force = true

# Map /latest/ to the RTD latest build.
[[redirects]]
  from = "/latest/*"
  to = "https://jupyterbook.org/latest/:splat"
  status = 200
  force = true