[build]
  command = "cd docs && npm install && npx myst build --html --execute"
  publish = "docs/_build/html"

# jupyterbook.org/docs - Blog
[[redirects]]
  from = "/blog"
  to = "https://jupyter-book-blog.netlify.app/blog/"
  status = 200
  force = true

[[redirects]]
  from = "/blog/*"
  to = "https://jupyter-book-blog.netlify.app/blog/:splat"
  status = 200
  force = true


# jupyterbook.org/compass - Team Compass
[[redirects]]
  from = "/compass"
  to = "https://compass.jupyterbook.org/"
  status = 200
  force = true

[[redirects]]
  from = "/compass/*"
  to = "https://compass.jupyterbook.org/:splat"
  status = 200
  force = true

# ----------------------------------------------------------------------------
# NETLIFY REDIRECTS FOR READ THE DOCS PROXY
# ----------------------------------------------------------------------------

# Force any /stable/ links back to /docs/ folder.
[[redirects]]
  from = "/stable/*"
  to = "/docs/:splat"
  status = 301
  force = true

# 2. NAKED PATH REDIRECT: Ensure /docs and /docs/ both work.
# This forces a trailing slash which helps relative asset paths work correctly.
[[redirects]]
  from = "/docs"
  to = "/docs/"
  status = 301
  force = true

# 3. MAIN DOCS PROXY: Map /docs/ to the RTD stable build.
[[redirects]]
  from = "/docs/*"
  to = "https://jupyterbook.org/docs-move-content-to-org/:splat"
  status = 200
  force = true

# 4. LATEST PROXY: Map /latest/ to the RTD latest build.
[[redirects]]
  from = "/latest/*"
  to = "https://jupyterbook.org/latest/:splat"
  status = 200
  force = true