[build]
  command = "cd docs && npm install && npx myst build --html --execute"
  publish = "docs/_build/html"

# jupyterbook.org/docs - Blog
[[redirects]]
  from = "/blog"
  to = "https://jupyter-book-blog.netlify.app/blog/"
  status = 200
  force = true

[[redirects]]
  from = "/blog/*"
  to = "https://jupyter-book-blog.netlify.app/blog/:splat"
  status = 200
  force = true

# User documentation - paths match RTD exactly so internal links just work
# /docs redirects to /stable (the default version)
[[redirects]]
  from = "/docs"
  to = "/stable/"
  status = 301
  force = true

[[redirects]]
  from = "/docs/"
  to = "/stable/"
  status = 301
  force = true

# /stable → RTD /stable
[[redirects]]
  from = "/stable"
  to = "/stable/"
  status = 301
  force = true

[[redirects]]
  from = "/stable/"
  to = "https://jupyterbook.org/stable/"
  status = 200
  force = true

[[redirects]]
  from = "/stable/*"
  to = "https://jupyterbook.org/stable/:splat/"
  status = 200
  force = true

# /latest → RTD /latest
[[redirects]]
  from = "/latest"
  to = "/latest/"
  status = 301
  force = true

[[redirects]]
  from = "/latest/"
  to = "https://jupyterbook.org/latest/"
  status = 200
  force = true

[[redirects]]
  from = "/latest/*"
  to = "https://jupyterbook.org/latest/:splat/"
  status = 200
  force = true

# /v1 → RTD /v1
[[redirects]]
  from = "/v1"
  to = "/v1/"
  status = 301
  force = true

[[redirects]]
  from = "/v1/"
  to = "https://jupyterbook.org/v1/"
  status = 200
  force = true

[[redirects]]
  from = "/v1/*"
  to = "https://jupyterbook.org/v1/:splat/"
  status = 200
  force = true

# jupyterbook.org/compass - Team Compass
[[redirects]]
  from = "/compass"
  to = "https://compass.jupyterbook.org/"
  status = 200
  force = true

[[redirects]]
  from = "/compass/*"
  to = "https://compass.jupyterbook.org/:splat"
  status = 200
  force = true